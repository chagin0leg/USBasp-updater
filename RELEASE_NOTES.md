# Релиз и CI/CD — краткая шпаргалка

## 1. Триггеры CI/CD (GitHub Actions)

**Файл:** `.github/workflows/ci.yaml`  
**Название:** Build and Release  

**Когда запускается:** при **пушке тега** вида `X.Y.Z` (например `0.4.1`, `1.0.0`).  
Шаблон: `[0-9]+.[0-9]+.[0-9]+`.

Тег можно создать и запушить так:
```bash
git tag 0.4.2
git push origin 0.4.2
```
После этого workflow соберёт проект и создаст GitHub Release с exe-файлом.

---

## 2. Версия приложения

**Задаётся тегом.** Вручную в коде версию менять не нужно.

- В `pubspec.yaml` и в `deploy/run_app.dart` в репозитории может стоять `0.0.0`.
- CI при сборке **подставляет версию из тега** в оба файла (шаг "Update pubspec.yaml and launcher versions").
- Для нового релиза: создать и запушить тег, например `0.4.2`.

---

## 3. Ветки

- **main** — основная ветка (у вас сейчас она).
- **develop** — ветка разработки (сейчас отстаёт от main).

Чтобы пушить в `develop`: переключиться на `develop`, подтянуть её, перенести/влить изменения с `main`, сделать коммиты и `git push origin develop`.  
Скрипт ниже это делает (коммиты разбиты логически).

---

## 4. Скриншот для релиза

Делается вручную. После создания Release в GitHub можно приложить скриншот к описанию или загрузить в репозиторий и дать ссылку.

---

## 5. Логические коммиты (что сделано в этой сессии)

1. **chore: add path dependency** — добавлен пакет `path` в `pubspec.yaml`.
2. **refactor(tips): 3-char keys, two-stage ready, build/upload errors** — ключи подсказок на 3 символа, два этапа «ready» (rnu/rwu), отдельная ошибка сборки (ube), для загрузки только pnf/tdn.
3. **feat(ui): block toolbar during operations** — блокировка кнопок тулбара на время операции (read EEPROM / upload).
